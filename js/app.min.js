var presentation = angular.module("presentation", ["ui.router"]);

presentation
	.controller("mainCtrl", ["$scope", "$timeout",
		function($scope, $timeout) {

			$scope.data = {
				currentslide: 1
			};

			$scope.$on('$includeContentLoaded', function() {
				$timeout(function() {
					$('pre code').each(function(i, block) {
						hljs.highlightBlock(block);
					});
				}, 0);
			});

			angular.element(window).on('keydown', function(evt) {
				if (evt.keyCode === 37) {
					$scope.down();
				}
				if (evt.keyCode === 39 || evt.keyCode === 32) {
					$scope.up();
				}
				$scope.$digest();
			});

			$scope.up = function() {
				var next = $scope.data.currentslide + 1;
				if (next > 49) {
					next = 0;
					$scope.data.currentslide = 1
				}
				$scope.data.currentslide = Number(next) || 1;
			};

			$scope.down = function() {
				var prev = $scope.data.currentslide - 1;

				if (prev < 0) {
					prev = 49;
					$scope.data.currentslide = 49
				}
				$scope.data.currentslide = Number(prev) || 1;
			};

		}]);

presentation.service("monthService", function() {

	this.getMonth = function() {
		return [
			{
				name: "January",
				order: 1,
				days: 31
			},
			{
				name: "February",
				order: 2,
				days: 28
			},
			{
				name: "March",
				order: 3,
				days: 31
			},
			{
				name: "April",
				order: 4,
				days: 30
			},
			{
				name: "May",
				order: 5,
				days: 31
			},
			{
				name: "June",
				order: 6,
				days: 30
			},
			{
				name: "July",
				order: 7,
				days: 31
			},
			{
				name: "August",
				order: 8,
				days: 31
			}, {
				name: "September",
				order: 9,
				days: 30
			}, {
				name: "October",
				order: 10,
				days: 31
			}, {
				name: "November",
				order: 11,
				days: 30
			}, {
				name: "December",
				order: 12,
				days: 31
			}];
	}

});

presentation.controller("meetUpDemoCtrl", [
	"$scope",
	"monthService",
	function($scope, monthService) {
		$scope.months = monthService.getMonth();
	}]);